(function(){"use strict";const I={withStackTrace:!1},g=(t,r,e=I)=>{const n=r.isOk()?{type:"Ok",value:r.value}:{type:"Err",value:r.error},i=e.withStackTrace?new Error().stack:void 0;return{data:n,message:t,stack:i}};function y(t,r,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(p){try{E(n.next(p))}catch(_){a(_)}}function d(p){try{E(n.throw(p))}catch(_){a(_)}}function E(p){p.done?o(p.value):i(p.value).then(c,d)}E((n=n.apply(t,[])).next())})}function k(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t){return this instanceof f?(this.v=t,this):new f(t)}function O(t,r,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(t,r||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(u){return function(v){return Promise.resolve(v).then(u,_)}}function c(u,v){n[u]&&(i[u]=function(T){return new Promise(function(V,q){o.push([u,T,V,q])>1||d(u,T)})},v&&(i[u]=v(i[u])))}function d(u,v){try{E(n[u](v))}catch(T){U(o[0][3],T)}}function E(u){u.value instanceof f?Promise.resolve(u.value.v).then(p,_):U(o[0][2],u)}function p(u){d("next",u)}function _(u){d("throw",u)}function U(u,v){u(v),o.shift(),o.length&&d(o[0][0],o[0][1])}}function L(t){var r,e;return r={},n("next"),n("throw",function(i){throw i}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(i,o){r[i]=t[i]?function(a){return(e=!e)?{value:f(t[i](a)),done:!1}:o?o(a):a}:o}}function j(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],e;return r?r.call(t):(t=typeof k=="function"?k(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=t[o]&&function(a){return new Promise(function(c,d){a=t[o](a),i(c,d,a.done,a.value)})}}function i(o,a,c,d){Promise.resolve(d).then(function(E){o({value:E,done:c})},a)}}typeof SuppressedError=="function"&&SuppressedError;class s{constructor(r){this._promise=r}static fromSafePromise(r){const e=r.then(n=>new w(n));return new s(e)}static fromPromise(r,e){const n=r.then(i=>new w(i)).catch(i=>new l(e(i)));return new s(n)}static fromThrowable(r,e){return(...n)=>new s(y(this,void 0,void 0,function*(){try{return new w(yield r(...n))}catch(i){return new l(e?e(i):i)}}))}static combine(r){return C(r)}static combineWithAllErrors(r){return W(r)}map(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){return e.isErr()?new l(e.error):new w(yield r(e.value))})))}andThrough(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){if(e.isErr())return new l(e.error);const n=yield r(e.value);return n.isErr()?new l(n.error):new w(e.value)})))}andTee(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){if(e.isErr())return new l(e.error);try{yield r(e.value)}catch{}return new w(e.value)})))}orTee(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){if(e.isOk())return new w(e.value);try{yield r(e.error)}catch{}return new l(e.error)})))}mapErr(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){return e.isOk()?new w(e.value):new l(yield r(e.error))})))}andThen(r){return new s(this._promise.then(e=>{if(e.isErr())return new l(e.error);const n=r(e.value);return n instanceof s?n._promise:n}))}orElse(r){return new s(this._promise.then(e=>y(this,void 0,void 0,function*(){return e.isErr()?r(e.error):new w(e.value)})))}match(r,e){return this._promise.then(n=>n.match(r,e))}unwrapOr(r){return this._promise.then(e=>e.unwrapOr(r))}safeUnwrap(){return O(this,arguments,function*(){return yield f(yield f(yield*L(j(yield f(this._promise.then(e=>e.safeUnwrap()))))))})}then(r,e){return this._promise.then(r,e)}[Symbol.asyncIterator](){return O(this,arguments,function*(){const e=yield f(this._promise);return e.isErr()&&(yield yield f(b(e.error))),yield f(e.value)})}}function b(t){return new s(Promise.resolve(new l(t)))}const P=t=>{let r=m([]);for(const e of t)if(e.isErr()){r=h(e.error);break}else r.map(n=>n.push(e.value));return r},C=t=>s.fromSafePromise(Promise.all(t)).andThen(P),x=t=>{let r=m([]);for(const e of t)e.isErr()&&r.isErr()?r.error.push(e.error):e.isErr()&&r.isOk()?r=h([e.error]):e.isOk()&&r.isOk()&&r.value.push(e.value);return r},W=t=>s.fromSafePromise(Promise.all(t)).andThen(x);var S;(function(t){function r(i,o){return(...a)=>{try{const c=i(...a);return m(c)}catch(c){return h(o?o(c):c)}}}t.fromThrowable=r;function e(i){return P(i)}t.combine=e;function n(i){return x(i)}t.combineWithAllErrors=n})(S||(S={}));function m(t){return new w(t)}function h(t){return new l(t)}class w{constructor(r){this.value=r}isOk(){return!0}isErr(){return!this.isOk()}map(r){return m(r(this.value))}mapErr(r){return m(this.value)}andThen(r){return r(this.value)}andThrough(r){return r(this.value).map(e=>this.value)}andTee(r){try{r(this.value)}catch{}return m(this.value)}orTee(r){return m(this.value)}orElse(r){return m(this.value)}asyncAndThen(r){return r(this.value)}asyncAndThrough(r){return r(this.value).map(()=>this.value)}asyncMap(r){return s.fromSafePromise(r(this.value))}unwrapOr(r){return this.value}match(r,e){return r(this.value)}safeUnwrap(){const r=this.value;return function*(){return r}()}_unsafeUnwrap(r){return this.value}_unsafeUnwrapErr(r){throw g("Called `_unsafeUnwrapErr` on an Ok",this,r)}*[Symbol.iterator](){return this.value}}class l{constructor(r){this.error=r}isOk(){return!1}isErr(){return!this.isOk()}map(r){return h(this.error)}mapErr(r){return h(r(this.error))}andThrough(r){return h(this.error)}andTee(r){return h(this.error)}orTee(r){try{r(this.error)}catch{}return h(this.error)}andThen(r){return h(this.error)}orElse(r){return r(this.error)}asyncAndThen(r){return b(this.error)}asyncAndThrough(r){return b(this.error)}asyncMap(r){return b(this.error)}unwrapOr(r){return r}match(r,e){return e(this.error)}safeUnwrap(){const r=this.error;return function*(){throw yield h(r),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(r){throw g("Called `_unsafeUnwrap` on an Err",this,r)}_unsafeUnwrapErr(r){return this.error}*[Symbol.iterator](){const r=this;return yield r,r}}S.fromThrowable,document.addEventListener("mouseup",A);async function A(){const t=await D();if(t.isErr())return;const r=await M(t.value);console.log(r)}async function D(){const t=window.getSelection();return t!==null&&t.rangeCount>0&&!t.isCollapsed?m(t.toString()):h({code:1,message:"error"})}async function M(t){try{const e=await(await Translator.create({sourceLanguage:"en",targetLanguage:"ja"})).translate(t);return m(e)}catch{return h({code:2,message:"error"})}}})();
