(function(){"use strict";function t(e){return new Promise((o,r)=>{chrome.storage.local.get([e],l=>{chrome.runtime.lastError?r(new Error(chrome.runtime.lastError.message)):o(l[e])})})}function s(e){return new Promise((o,r)=>{chrome.storage.local.set(e,()=>{chrome.runtime.lastError?r(new Error(chrome.runtime.lastError.message)):o()})})}let n=!1;document.addEventListener("mousedown",e=>{n=!0}),document.addEventListener("mouseup",async e=>{const o=await t("isExtensionOn");if(o===void 0)console.log("拡張機能の状態が保存されていません。"),await s({isExtensionOn:!0}),console.log("拡張機能をONにしました。");else if(o)console.log("拡張機能はONです。");else{console.log("拡張機能はOFFです。");return}if(n){const r=window.getSelection()?.toString();r&&r.length>0?(console.log(`【コピーしたテキスト】
 ${r}`),await i(r)):console.log("コピー失敗"),n=!1}});async function i(e){try{await navigator.clipboard.writeText(e),console.log("テキストがクリップボードにコピーされました")}catch(o){console.error("クリップボードへのコピーに失敗しました:",o)}}})();
